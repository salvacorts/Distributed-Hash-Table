syntax = "proto2";
option java_package = "ca.NetSysLab.ProtocolBuffers";
option java_outer_classname = "InternalRequest";

message EpidemicRequest {
	enum EpidemicType {
		DEAD = 0;
		ALIVE = 1;
	}

	required bytes epId = 1;
	required EpidemicType type = 2;

	optional StateTransfer state = 3;
    optional string server = 4;
	optional int32 port = 5;
	optional int32 hashStart = 6;
	optional int32 hashEnd = 7;
	optional int32 nodeId = 8;
}

message KVTransfer {
	repeated KVPair kvlist = 1;
}

message StateTransfer {
	repeated NodeInfo nodes = 1;
}

message NodeInfo {
	required bytes address = 1;
	required int32 port = 2;
	required int32 hashStart = 3;
	required int32 hashEnd = 4;
	required int64 timestamp = 5;
}

message KVPair {
	required bytes key = 1;
	required bytes value = 2;
	required int32 version = 3;
}
